{"task_id": "B088", "description": "A company produces product A and product B. Each unit of product A sold generates a profit of £30, while each unit of product B sold generates a profit of £10. The company can allocate a maximum of 40 hours per week for production. Producing one unit of product A requires 6 hours, while producing one unit of product B requires 3 hours. Market demand requires that the quantity of product B produced must be at least three times the quantity of product A. The storage space occupied by product A is four times that of product B, and a maximum of four units of product A can be stored per week.\n\nFormulate a model for this problem.", "ground_truth": 150.0, "formulation": null, "correct_program": "def optimize_production(profit_A=30,\n                        profit_B=10,\n                        hours_per_A=6,\n                        hours_per_B=3,\n                        max_hours=40,\n                        min_B_ratio=3,\n                        max_A_storage=4):\n    import gurobipy as gp\n    from gurobipy import GRB\n\n    # Create a new model\n    model = gp.Model(\"Production_Optimization\")\n\n    # Decision variables: number of units of A and B\n    x_A = model.addVar(vtype=GRB.INTEGER, name=\"x_A\", lb=0)\n    x_B = model.addVar(vtype=GRB.INTEGER, name=\"x_B\", lb=0)\n\n    # Set objective: maximize profit\n    model.setObjective(profit_A * x_A + profit_B * x_B, GRB.MAXIMIZE)\n\n    # Add constraints\n    # Production time constraint\n    model.addConstr(hours_per_A * x_A + hours_per_B * x_B <= max_hours,\n                    \"TimeLimit\")\n    # Market demand constraint for B\n    model.addConstr(x_B >= min_B_ratio * x_A, \"DemandB\")\n    # Storage space constraint for A\n    model.addConstr(x_A <= max_A_storage, \"StorageA\")\n\n    # Optimize the model\n    model.optimize()\n\n    # Check if a feasible solution was found\n    if model.status == GRB.OPTIMAL:\n        return model.objVal\n    else:\n        return None\nif __name__ == \"__main__\":  # pragma: no cover\n    result = optimize_production()\n    if result is not None:\n        print(f\"Optimal profit: {result}\")\n    else:\n        print(\"No feasible solution found.\")", "output_status": [], "success_count": 0, "success_confidence": 0, "fail_to_diagnose": 0, "fail_to_verify": 0, "retrieved_insights": [], "tag": [{"problem_domain": "Production Planning", "modeling_type": "IP", "industry_sector": "Manufacturing", "reason": "The problem involves determining optimal production quantities for two products to maximize profit under resource, demand, and storage constraints, which is a classic production planning scenario. The decision variables are integers (number of units), and the objective and constraints are linear, making it an Integer Program."}], "cluster": null, "prompt": "Below is an operations research question. First formulate the problem as an optimization problem. Then according to the formulated problem, write python code that uses 'gurobipy' to solve the optimization problem. You should write a complete python code that can be executed to solve the optimization problem.\n\nIMPORTANT: Your code should follow these requirements:\n1. Create a Gurobi model variable named 'model' (not 'm' or other names)\n2. Include all necessary imports and data setup\n3. Write the complete optimization code that can run independently\n4. Do NOT wrap everything in a function - write the code directly\n5. Make sure the model is created and optimized in the main execution flow\n6. The code should print the optimal objective value when solved successfully\n\nExample format:\n```python\nimport gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\ndata = {...}\n\n# Create model\nmodel = gp.Model(\"ProblemName\")\n\n# Decision variables\nx = model.addVars(...)\n\n# Objective\nmodel.setObjective(...)\n\n# Constraints\nmodel.addConstr(...)\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\nelse:\n    print(\"No optimal solution found\")\n```\n\n# Question:\nA company produces product A and product B. Each unit of product A sold generates a profit of £30, while each unit of product B sold generates a profit of £10. The company can allocate a maximum of 40 hours per week for production. Producing one unit of product A requires 6 hours, while producing one unit of product B requires 3 hours. Market demand requires that the quantity of product B produced must be at least three times the quantity of product A. The storage space occupied by product A is four times that of product B, and a maximum of four units of product A can be stored per week.\n\nFormulate a model for this problem.\n\n# Response:", "generated_output": "Formulation\n\nDecision variables:\n- x_A ≥ 0: number of units of product A produced per week\n- x_B ≥ 0: number of units of product B produced per week\n\nObjective:\n- Maximize profit: maximize 30 x_A + 10 x_B\n\nConstraints:\n- Production time: 6 x_A + 3 x_B ≤ 40\n- Demand relationship: x_B ≥ 3 x_A\n- Storage capacity: Let one unit of B use 1 storage unit and A use 4 storage units. Since at most the space for 4 units of A is available per week, total storage capacity is 4 × 4 = 16 storage units:\n  4 x_A + 1 x_B ≤ 16\n- Nonnegativity: x_A, x_B ≥ 0\n\nPython code (Gurobi)\n\n```python\nimport gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\nproducts = ['A', 'B']\n\nprofit = {'A': 30.0, 'B': 10.0}        # Profit per unit\ntime_req = {'A': 6.0, 'B': 3.0}        # Hours per unit\ntotal_hours = 40.0                      # Available hours per week\n\n# Demand relationship: B >= demandMult * A\ndemandMult = 3.0\n\n# Storage setup:\n# Let storage_unit_B = 1.0, and A uses 4 times B's storage.\nstorage_ratio = {'A': 4.0, 'B': 1.0}\n# Maximum storage corresponds to at most 4 units of A -> 4 * storage(A) = 4 * 4 = 16 storage units\nstorage_capacity = 4.0 * storage_ratio['A']  # 16.0\n\n# Create model\nmodel = gp.Model(\"ProductionPlanning\")\n\n# Decision variables: production quantities of A and B (continuous, nonnegative)\nx = model.addVars(products, lb=0.0, name=\"x\")\n\n# Objective: maximize total profit\nmodel.setObjective(profit['A'] * x['A'] + profit['B'] * x['B'], GRB.MAXIMIZE)\n\n# Constraints\n\n# Production time constraint\nmodel.addConstr(time_req['A'] * x['A'] + time_req['B'] * x['B'] <= total_hours, name=\"Time\")\n\n# Demand relationship: B >= 3 * A\nmodel.addConstr(x['B'] >= demandMult * x['A'], name=\"Demand\")\n\n# Storage capacity: 4*A + 1*B <= 16\nmodel.addConstr(storage_ratio['A'] * x['A'] + storage_ratio['B'] * x['B'] <= storage_capacity, name=\"Storage\")\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\n    # Optional: print decision variables\n    for p in products:\n        print(f\"x_{p} = {x[p].X}\")\nelse:\n    print(\"No optimal solution found\")\n```", "extracted_code": "import gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\nproducts = ['A', 'B']\n\nprofit = {'A': 30.0, 'B': 10.0}        # Profit per unit\ntime_req = {'A': 6.0, 'B': 3.0}        # Hours per unit\ntotal_hours = 40.0                      # Available hours per week\n\n# Demand relationship: B >= demandMult * A\ndemandMult = 3.0\n\n# Storage setup:\n# Let storage_unit_B = 1.0, and A uses 4 times B's storage.\nstorage_ratio = {'A': 4.0, 'B': 1.0}\n# Maximum storage corresponds to at most 4 units of A -> 4 * storage(A) = 4 * 4 = 16 storage units\nstorage_capacity = 4.0 * storage_ratio['A']  # 16.0\n\n# Create model\nmodel = gp.Model(\"ProductionPlanning\")\n\n# Decision variables: production quantities of A and B (continuous, nonnegative)\nx = model.addVars(products, lb=0.0, name=\"x\")\n\n# Objective: maximize total profit\nmodel.setObjective(profit['A'] * x['A'] + profit['B'] * x['B'], GRB.MAXIMIZE)\n\n# Constraints\n\n# Production time constraint\nmodel.addConstr(time_req['A'] * x['A'] + time_req['B'] * x['B'] <= total_hours, name=\"Time\")\n\n# Demand relationship: B >= 3 * A\nmodel.addConstr(x['B'] >= demandMult * x['A'], name=\"Demand\")\n\n# Storage capacity: 4*A + 1*B <= 16\nmodel.addConstr(storage_ratio['A'] * x['A'] + storage_ratio['B'] * x['B'] <= storage_capacity, name=\"Storage\")\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\n    # Optional: print decision variables\n    for p in products:\n        print(f\"x_{p} = {x[p].X}\")\nelse:\n    print(\"No optimal solution found\")", "execution_success": true, "mathematical_accuracy": false, "execution_result": "Optimal value: 146.66666666666669", "execution_best_solution": "146.66666666666669", "execution_state": "Execution Successful and Best Solution Found"}
{"task_id": "B042", "description": "A production base needs to extract raw materials from warehouses A and B every day for production. The required raw materials are: at least 240 pieces of raw material A, at least 80 kg of raw material B, and at least 120 tons of raw material C. It is known that: Each truck from warehouse A can transport back to the production base 4 pieces of raw material A, 2 kg of raw material B, 6 tons of raw material C, with a freight cost of 200 yuan per truck; each truck from warehouse B can transport back to the production base 7 pieces of raw material A, 2 kg of raw material B, 2 tons of raw material C per day, with a freight cost of 160 yuan per truck. Question: In order to meet production needs, how many trucks should be dispatched daily from warehouse A and warehouse B to minimize the total freight cost?", "ground_truth": 6800.0, "formulation": null, "correct_program": "def optimize_truck_dispatch(\n        cost_A=200,  # freight cost per truck from warehouse A\n        cost_B=160,  # freight cost per truck from warehouse B\n        min_A=240,  # minimum raw material A pieces\n        min_B=80,  # minimum raw material B kg\n        min_C=120  # minimum raw material C tons\n):\n    import gurobipy as gp\n    from gurobipy import GRB\n\n    # Create a new model\n    model = gp.Model(\"Truck_Dispatch_Optimization\")\n\n    # Decision variables: number of trucks from warehouses A and B\n    x_A = model.addVar(vtype=GRB.INTEGER, lb=0, name=\"x_A\")\n    x_B = model.addVar(vtype=GRB.INTEGER, lb=0, name=\"x_B\")\n\n    # Set objective: minimize total freight cost\n    model.setObjective(cost_A * x_A + cost_B * x_B, GRB.MINIMIZE)\n\n    # Add constraints for raw materials\n    # Raw material A\n    model.addConstr(4 * x_A + 7 * x_B >= min_A, \"Raw_A\")\n    # Raw material B\n    model.addConstr(2 * x_A + 2 * x_B >= min_B, \"Raw_B\")\n    # Raw material C\n    model.addConstr(6 * x_A + 2 * x_B >= min_C, \"Raw_C\")\n\n    # Optimize the model\n    model.optimize()\n\n    # Check if a feasible solution was found\n    if model.status == GRB.OPTIMAL:\n        # Return the optimal total freight cost\n        return model.objVal\n    else:\n        # No feasible solution found\n        return None\nif __name__ == \"__main__\":\n    result = optimize_truck_dispatch()\n    if result is not None:\n        print(f\"Optimal total freight cost: {result}\")\n    else:\n        print(\"No feasible solution found.\")", "output_status": [], "success_count": 0, "success_confidence": 0, "fail_to_diagnose": 0, "fail_to_verify": 0, "retrieved_insights": [], "tag": [{"problem_domain": "Resource Allocation", "modeling_type": "IP", "industry_sector": "Manufacturing", "reason": "The problem involves allocating trucks from different warehouses to meet minimum raw material requirements at a production base while minimizing transportation costs. The decision variables are integers (number of trucks), and the objective and constraints are linear, classifying it as an Integer Program within the manufacturing sector."}], "cluster": null, "prompt": "Below is an operations research question. First formulate the problem as an optimization problem. Then according to the formulated problem, write python code that uses 'gurobipy' to solve the optimization problem. You should write a complete python code that can be executed to solve the optimization problem.\n\nIMPORTANT: Your code should follow these requirements:\n1. Create a Gurobi model variable named 'model' (not 'm' or other names)\n2. Include all necessary imports and data setup\n3. Write the complete optimization code that can run independently\n4. Do NOT wrap everything in a function - write the code directly\n5. Make sure the model is created and optimized in the main execution flow\n6. The code should print the optimal objective value when solved successfully\n\nExample format:\n```python\nimport gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\ndata = {...}\n\n# Create model\nmodel = gp.Model(\"ProblemName\")\n\n# Decision variables\nx = model.addVars(...)\n\n# Objective\nmodel.setObjective(...)\n\n# Constraints\nmodel.addConstr(...)\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\nelse:\n    print(\"No optimal solution found\")\n```\n\n# Question:\nA production base needs to extract raw materials from warehouses A and B every day for production. The required raw materials are: at least 240 pieces of raw material A, at least 80 kg of raw material B, and at least 120 tons of raw material C. It is known that: Each truck from warehouse A can transport back to the production base 4 pieces of raw material A, 2 kg of raw material B, 6 tons of raw material C, with a freight cost of 200 yuan per truck; each truck from warehouse B can transport back to the production base 7 pieces of raw material A, 2 kg of raw material B, 2 tons of raw material C per day, with a freight cost of 160 yuan per truck. Question: In order to meet production needs, how many trucks should be dispatched daily from warehouse A and warehouse B to minimize the total freight cost?\n\n# Response:", "generated_output": "Formulation:\n- Decision variables:\n  - xA: number of trucks dispatched from warehouse A per day (integer, ≥ 0)\n  - xB: number of trucks dispatched from warehouse B per day (integer, ≥ 0)\n- Objective: Minimize total freight cost\n  Min 200 xA + 160 xB\n- Constraints:\n  - Raw material A (pieces): 4 xA + 7 xB ≥ 240\n  - Raw material B (kg): 2 xA + 2 xB ≥ 80\n  - Raw material C (tons): 6 xA + 2 xB ≥ 120\n  - xA, xB ∈ Z+, i.e., nonnegative integers\n\nPython code (Gurobi):\n\n```python\nimport gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\ncost = {'A': 200, 'B': 160}  # cost per truck (yuan)\nship = {\n    'A': {'RA': 4, 'RB': 2, 'RC': 6},  # per-truck deliveries from warehouse A\n    'B': {'RA': 7, 'RB': 2, 'RC': 2}   # per-truck deliveries from warehouse B\n}\ndemand = {'RA': 240, 'RB': 80, 'RC': 120}  # required amounts\n\n# Create model\nmodel = gp.Model(\"MinCostTrucking\")\n\n# Decision variables: number of trucks from A and B (integers)\nx = model.addVars(['A', 'B'], vtype=GRB.INTEGER, lb=0, name=\"trucks\")\n\n# Objective: minimize total freight cost\nmodel.setObjective(cost['A'] * x['A'] + cost['B'] * x['B'], GRB.MINIMIZE)\n\n# Constraints\n# Raw material A (pieces)\nmodel.addConstr(ship['A']['RA'] * x['A'] + ship['B']['RA'] * x['B'] >= demand['RA'], name=\"MatA\")\n# Raw material B (kg)\nmodel.addConstr(ship['A']['RB'] * x['A'] + ship['B']['RB'] * x['B'] >= demand['RB'], name=\"MatB\")\n# Raw material C (tons)\nmodel.addConstr(ship['A']['RC'] * x['A'] + ship['B']['RC'] * x['B'] >= demand['RC'], name=\"MatC\")\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\n    print(f\"Trucks from warehouse A: {int(round(x['A'].X))}\")\n    print(f\"Trucks from warehouse B: {int(round(x['B'].X))}\")\nelse:\n    print(\"No optimal solution found\")\n```", "extracted_code": "import gurobipy as gp\nfrom gurobipy import GRB\n\n# Data setup\ncost = {'A': 200, 'B': 160}  # cost per truck (yuan)\nship = {\n    'A': {'RA': 4, 'RB': 2, 'RC': 6},  # per-truck deliveries from warehouse A\n    'B': {'RA': 7, 'RB': 2, 'RC': 2}   # per-truck deliveries from warehouse B\n}\ndemand = {'RA': 240, 'RB': 80, 'RC': 120}  # required amounts\n\n# Create model\nmodel = gp.Model(\"MinCostTrucking\")\n\n# Decision variables: number of trucks from A and B (integers)\nx = model.addVars(['A', 'B'], vtype=GRB.INTEGER, lb=0, name=\"trucks\")\n\n# Objective: minimize total freight cost\nmodel.setObjective(cost['A'] * x['A'] + cost['B'] * x['B'], GRB.MINIMIZE)\n\n# Constraints\n# Raw material A (pieces)\nmodel.addConstr(ship['A']['RA'] * x['A'] + ship['B']['RA'] * x['B'] >= demand['RA'], name=\"MatA\")\n# Raw material B (kg)\nmodel.addConstr(ship['A']['RB'] * x['A'] + ship['B']['RB'] * x['B'] >= demand['RB'], name=\"MatB\")\n# Raw material C (tons)\nmodel.addConstr(ship['A']['RC'] * x['A'] + ship['B']['RC'] * x['B'] >= demand['RC'], name=\"MatC\")\n\n# Optimize\nmodel.optimize()\n\n# Results\nif model.status == GRB.OPTIMAL:\n    print(f\"Optimal value: {model.objVal}\")\n    print(f\"Trucks from warehouse A: {int(round(x['A'].X))}\")\n    print(f\"Trucks from warehouse B: {int(round(x['B'].X))}\")\nelse:\n    print(\"No optimal solution found\")", "execution_success": true, "mathematical_accuracy": true, "execution_result": "Optimal value: 6800.0", "execution_best_solution": "6800.0", "execution_state": "Execution Successful and Best Solution Found"}
